<img src = "https://user-images.githubusercontent.com/80062632/178316819-9873c137-bcbc-4162-afae-095e1a8e99ce.png">  <br>

# happic: í•´í”½

**Be happy, take a happic:**

> **ë§¤ì¼ì˜ ì¶”ì–µì´ ë‚˜ì˜ í–‰ë³µì´ ë˜ì–´, í•´í”½** <br>
> ì €í¬ëŠ” í•´í”½ì…ë‹ˆë‹¤
>
> SOPT 30th APP JAM <br>
> í”„ë¡œì íŠ¸ ê¸°ê°„ : 2022.07.02 ~ 2022.07.23

`ì¶”í›„ ë¦´ë¦¬ì¦ˆ ì˜ˆì • `


## ì£¼ìš” ê¸°ëŠ¥ ì†Œê°œ


![KakaoTalk_20220722_234934351](https://user-images.githubusercontent.com/78267146/180466639-5bf06199-1cb4-461a-bdd3-4f501f183d0f.jpg)

![KakaoTalk_20220722_234934351_01](https://user-images.githubusercontent.com/78267146/180466650-074c26c8-2191-467a-9f3e-a6d483bb800c.jpg)

![KakaoTalk_20220722_234934351_02](https://user-images.githubusercontent.com/78267146/180466658-40c0fe49-2cde-4eb4-bfa3-70eee4b604d5.jpg)

![KakaoTalk_20220722_234934351_03](https://user-images.githubusercontent.com/78267146/180466675-ee5c00e8-78b7-4608-87c9-1006c6dddd42.jpg)


<br>

## Service workflow

![IA-FLOW@3x](https://user-images.githubusercontent.com/80062632/178763859-26283266-06bc-4469-b121-223da1c52b53.png)
<br>

##  Team happic SERVER Developers
 <img src="https://user-images.githubusercontent.com/69195315/178483597-66729963-bffd-423b-8e89-c725ff4174b3.png" width="500"> | <img src="https://user-images.githubusercontent.com/69195315/178483568-97b1c139-84ee-4cef-817b-456d09dc1db6.png" width="500"> | <img src="https://user-images.githubusercontent.com/69195315/178483535-694834b5-ca8f-4386-8b0f-515f9ef84ac1.png" width="500"> |
 :---------:|:----------:|:---------:
 ì´ì„œìš° | ê¹€ë™ì¬ | ìœ ì†¡ê²½ |
[dltjdn](https://github.com/dltjdn) | [ehdwoKIM](https://github.com/ehdwoKIM) | [ssong915](https://github.com/ssong915) |

<br>

## ğŸŒ² Git Branch Convention

- main: ë°°í¬ë¥¼ ìœ„í•œ ë¸Œëœì¹˜ ( **ìµœì¢…ë³¸** )

- develop: ê¸°ëŠ¥ ê°œë°œì´ ì™„ë£Œëœ ì½”ë“œë“¤ì´ ëª¨ì´ëŠ” ê³³ ( **ê²€ì¦ëœ ê³³ì´ì ê²€ì¦í•  ê³³** )

- feature: ê¸°ëŠ¥ ê°œë°œì„ ìœ„í•œ ë¸Œëœì¹˜ ( **feature/ë³¸ì¸ì´ë¦„/ê¸°ëŠ¥ëª…** )


<br/>

## ğŸ’Œ Commit Convention

```
- [ADD] : ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„
- [FEAT] : ADD ì´ì™¸ì˜ ë¶€ìˆ˜ì ì¸ ì½”ë“œ ì¶”ê°€, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€, ìƒˆë¡œìš´ íŒŒì¼ ìƒì„± ì‹œ
- [CHORE]: ì½”ë“œ ìˆ˜ì •, ë‚´ë¶€ íŒŒì¼ ìˆ˜ì •
- [FIX] : ë²„ê·¸, ì˜¤ë¥˜ í•´ê²°
- [DEL] : ì“¸ëª¨ì—†ëŠ” ì½”ë“œ ì‚­ì œ
- [DOCS] : READMEë‚˜ WIKI ë“±ì˜ ë¬¸ì„œ ê°œì •
- [MOVE] : í”„ë¡œì íŠ¸ ë‚´ íŒŒì¼ì´ë‚˜ ì½”ë“œì˜ ì´ë™
- [RENAME] : íŒŒì¼ ì´ë¦„ì˜ ë³€ê²½
- [STYLE] : ì½”ë“œê°€ ì•„ë‹Œ ìŠ¤íƒ€ì¼ ë³€ê²½ì„ í•˜ëŠ” ê²½ìš°
```

<br/>

## âœ¨ Coding Convention
<details>
<summary> ëª…ëª…ê·œì¹™ (Naming Conventions)</summary>
<div markdown="1">
 
1. ì´ë¦„ìœ¼ë¡œë¶€í„° ì˜ë„ê°€ ì½í˜€ì§ˆ ìˆ˜ ìˆê²Œ ì“´ë‹¤.   
2. ì˜¤ë¸Œì íŠ¸, í•¨ìˆ˜, ê·¸ë¦¬ê³  ì¸ìŠ¤í„´ìŠ¤ì—ëŠ” `camelCase`ë¥¼ ì‚¬ìš©í•œë‹¤.    
3. í´ë˜ìŠ¤ë‚˜ constructorì—ëŠ” `PascalCase`ë¥¼ ì‚¬ìš©í•œë‹¤.    
4. í•¨ìˆ˜ ì´ë¦„ì€ ë™ì‚¬ + ëª…ì‚¬ í˜•íƒœë¡œ ì‘ì„±í•œë‹¤.    
    ex) `postUserInformation()`
 5. ì•½ì–´ ì‚¬ìš©ì€ ìµœëŒ€í•œ ì§€ì–‘í•œë‹¤.
 6. ì´ë¦„ì— ë„¤ ë‹¨ì–´ ì´ìƒì´ ë“¤ì–´ê°€ë©´ íŒ€ì›ê³¼ ìƒì˜ë¥¼ ê±°ì¹œ í›„ ì‚¬ìš©í•œë‹¤.
 7. ë°ì´í„°ë² ì´ìŠ¤ ëª…ì€ ì˜ì–´ ì†Œë¬¸ìë¡œ êµ¬ì„±í•œë‹¤.
</div>
</details>
<details>
<summary> ë¸”ë¡ (Blocks)</summary>
<div markdown="1">

 1. ë³µìˆ˜í–‰ì˜ ë¸”ë¡ì—ëŠ” ì¤‘ê´„í˜¸({})ë¥¼ ì‚¬ìš©í•œë‹¤.
 2. ë³µìˆ˜í–‰ ë¸”ë¡ì˜ if ì™€ else ë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° else ëŠ” if ë¸”ë¡ ëì˜ ì¤‘ê´„í˜¸( } )ì™€ ê°™ì€ í–‰ì— ìœ„ì¹˜ì‹œí‚¨ë‹¤.

</div>
</details>
<details>
<summary> ì½”ë©˜íŠ¸ (Comments)</summary>
<div markdown="1">

1. ë³µìˆ˜í˜•ì˜ ì½”ë©˜íŠ¸ëŠ” `/** ... */` ë¥¼ ì‚¬ìš©í•œë‹¤.
2. ë‹¨ì¼ í–‰ì˜ ì½”ë©˜íŠ¸ì—ëŠ” `//` ì„ ì‚¬ìš©í•˜ê³  ì½”ë©˜íŠ¸ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì€ ì½”ë“œì˜ ìƒë¶€ì— ë°°ì¹˜í•œë‹¤. ê·¸ë¦¬ê³  ì½”ë©˜íŠ¸ì˜ ì•ì— ë¹ˆ í–‰ì„ ë„£ëŠ”ë‹¤.

</div>
</details>
<details>
<summary> ë¬¸ìì—´ (Strings)</summary>
<div markdown="1">

1. ë¬¸ìì—´ì—ëŠ” ì‹±í¬ì¿¼íŠ¸ `''` ë¥¼ ì‚¬ìš©í•œë‹¤..
2. í”„ë¡œê·¸ë¨ì—ì„œ ë¬¸ìì—´ì„ ìƒì„±í•˜ëŠ” ê²½ìš°ëŠ” ë¬¸ìì—´ ì—°ê²°ì´ ì•„ë‹Œ `template strings`ë¥¼ ì´ìš©í•œë‹¤.

</div>
</details>
<details>
<summary> í•¨ìˆ˜ (Functions)</summary>
<div markdown="1">

1. í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.
 ```javascript
  var arr1 = [1, 2, 3];
  var pow1 = arr.map(function (x) { // ES5 Not Good
    return x * x;
  });

  const arr2 = [1, 2, 3];
  const pow2 = arr.map(x => x * x); // ES6 Good
 ```
2. ë¹„ë™ê¸° í•¨ìˆ˜ ì‚¬ìš© ì‹œ
 Promiseí•¨ìˆ˜ì˜ ì‚¬ìš©ì€ ì§€ì–‘í•˜ê³  **async, await** ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

</div>
</details>
<details>
<summary> ì¡°ê±´ì‹ê³¼ ë“±ê°€ì‹ (Comparsion Operators & Equality)</summary>
<div markdown="1">

1. `==`ì´ë‚˜ `!=`ë³´ë‹¤ `===` ì™€ `!==`ì„ ì‚¬ìš©í•œë‹¤.
2. ë‹¨ì¶•í˜•ì„ ì‚¬ìš©í•œë‹¤.
3. ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ `Promise`í•¨ìˆ˜ì˜ ì‚¬ìš©ì€ ì§€ì–‘í•˜ê³  `async, await`ë¥¼ ì“°ë„ë¡ í•œë‹¤.
 
</div>
</details>
<br/>

## ğŸ—‚ Project Foldering

```
ğŸ“¦ config                   
 â”— ğŸ“œ index.ts

ğŸ“¦ controllers               
 â”£ ğŸ“œ index.ts

ğŸ“¦ interfaces                
 â”— ğŸ“‚ film
 â”ƒ â”— ğŸ“œ FilmInfo.ts
 â”— ğŸ“‚ keyword
   â”— ğŸ“œ KeywordInfo.ts
 â”— ğŸ“‚ user
   â”— ğŸ“œ UserInfo.ts

ğŸ“¦ loaders
 â”— ğŸ“œ db.ts

ğŸ“¦ middlewares
 â”— ğŸ“œ auth.ts

ğŸ“¦ models                    
 â”£ ğŸ“œ Film.ts
 â”£ ğŸ“œ Keyword.ts
 â”— ğŸ“œ User.ts

ğŸ“¦ modules
 â”— ğŸ“œ util.ts
 â”— ğŸ“œ statusCode.ts
 â”— ğŸ“œ responseMessage.ts

ğŸ“¦ routes                    
 â”£ ğŸ“œ index.ts

ğŸ“¦ services                  
 â”£ ğŸ“œ index.ts
```

<br/>

## ğŸ—’ DB Schema
<details>
<summary> Char</summary>
<div markdown="1">

```typescript
const CharSchema = new mongoose.Schema({
  characterId: {
    type: Number,
    required: true,
  },
  characterName: {
    type: String,
    required: true,
  },
});
```

</div>
</details>
<details>
<summary> File</summary>
<div markdown="1">

```typescript
const FileSchema = new mongoose.Schema(
  {
    link: {
      type: String,
      required: true,
    },
    fileName: {
      type: String,
      required: true,
    },
  },
  {
    timestamps: true, // createdAt, updatedAt ìë™ê¸°ë¡
  }
);
```

</div>
</details>
<details>
<summary> User</summary>
<div markdown="1">

```typescript
const UserSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
  },
  social: {
    type: String,
    required: true,
    unique: true,
  },
  socialId: {
    type: String,
    required: true,
    unique: true,
  },
  email: {
    type: String,
    required: true,
    unique: true,
  },
  characterId: {
    type: Number,
    required: true,
  },
  characterName: {
    type: String,
    required: true,
  },
  growthRate: {
    type: Number,
    required: true,
    default: 0,
  },
  level: {
    type: Number,
    required: true,
    default: 1,
  },
  film: [
    {
      type: mongoose.Types.ObjectId,
      ref: 'Film',
    },
  ],
  count: {
    type: Number,
    required: true,
    default: 0,
  },
  fcmToken: {
    type: String,
    required: true,
    unique: true,
  },
  refreshToken: {
    type: String,
    required: true,
    unique: true,
  },
});
```

</div>
</details>
<details>
<summary> Film</summary>
<div markdown="1">

```typescript
const FilmSchema = new mongoose.Schema(
  {
    writer: {
      type: mongoose.Types.ObjectId,
      required: true,
      ref: 'User',
    },
    photo: {
      type: String,
      required: true,
    },
    thumbnail: {
      type: String,
    },
    keyword: [
      {
        type: mongoose.Types.ObjectId,
        required: true,
        ref: 'Keyword',
      },
    ],
    year: {
      type: Number,
      required: true,
    },
    month: {
      type: Number,
      required: true,
    },
  },
  {
    timestamps: true, // createdAt, updatedAt ìë™ê¸°ë¡
  }
);
```

</div>
</details>
<details>
<summary> Keyword</summary>
<div markdown="1">

```typescript
const KeywordSchema = new mongoose.Schema(
  {
    writer: {
      type: mongoose.Types.ObjectId,
      required: true,
      ref: 'User',
    },
    category: {
      type: String,
      required: true,
    },
    content: {
      type: String,
      required: true,
    },
    year: {
      type: Number,
      required: true,
    },
    month: {
      type: Number,
      required: true,
    },
    count: {
      type: Number,
      required: true,
      default: 0,
    },
  },
  {
    timestamps: true, // createdAt, updatedAt ìë™ê¸°ë¡
  }
);
```

</div>
</details>


<br/>

## ğŸ›  API

- [API ëª…ì„¸ì„œ](https://www.notion.so/API-7c20c52cd7444e1391762dc8b502fd1a)

<br />

## ğŸ›  Dependencies module (package.json)
```json
{
  "name": "node-typescript-init",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "nodemon",
    "build": "tsc",
    "start:dev": "node dist/index.js",
    "test": "mocha -r ts-node/register src/test/daily.spec.ts"
  },
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@types/chai": "^4.3.1",
    "@types/express": "^4.17.13",
    "@types/jsonwebtoken": "^8.5.8",
    "@types/mocha": "^9.1.1",
    "@types/mongoose": "^5.11.97",
    "@types/multer": "^1.4.7",
    "@types/multer-s3": "^2.7.12",
    "@types/node": "^17.0.25",
    "@types/supertest": "^2.0.12",
    "@typescript-eslint/eslint-plugin": "^5.30.5",
    "@typescript-eslint/parser": "^5.30.5",
    "chai": "^4.3.6",
    "eslint": "^8.19.0",
    "mocha": "^10.0.0",
    "nodemon": "^2.0.15",
    "prettier": "^2.7.1",
    "supertest": "^6.2.4",
    "ts-node": "^10.7.0",
    "typescript": "^4.6.3"
  },
  "dependencies": {
    "aws-sdk": "^2.1143.0",
    "axios": "^0.27.2",
    "bcryptjs": "^2.4.3",
    "bucket": "^0.0.1",
    "dayjs": "^1.11.3",
    "dotenv": "^16.0.0",
    "eslint-config-prettier": "^8.5.0",
    "eslint-plugin-prettier": "^4.2.1",
    "express": "^4.18.1",
    "express-validator": "^6.14.2",
    "firebase-admin": "^11.0.0",
    "jsonwebtoken": "^8.5.1",
    "mongoose": "^6.3.1",
    "multer": "^1.4.4",
    "multer-s3": "^2.10.0",
    "node-schedule": "^2.1.0",
    "winston": "^3.8.1"
  }
}

```


<br />

## ğŸ›  Server Architecture

- ê°œë°œ í™˜ê²½ : Typescript, Express(Node.js)
- ë°ì´í„°ë² ì´ìŠ¤ : MongoDB, AWS S3
- ì„œë²„ í™˜ê²½ : AWS EC2, PM2
![180420764-1afac15d-1ef5-4c47-b68e-90cb128c3d7c](https://user-images.githubusercontent.com/69195315/180443174-4fd1612f-f095-4a99-a261-86cd0ddac6f4.png)


<br />
 


---

<img src = "https://user-images.githubusercontent.com/80062632/178400592-f38ba33e-d58e-4ecf-9c1a-96fec9f305a6.png" width="100"> 
